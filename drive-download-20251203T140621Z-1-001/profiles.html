<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bird Profiles - FalconPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --forest-green: #2D5016;
            --warm-amber: #D4A574;
            --stone-gray: #6B7280;
            --copper-brown: #B45309;
            --sky-blue: #7DD3FC;
            --alert-red: #EF4444;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--forest-green) 0%, #1a3009 50%, var(--forest-green) 100%);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            min-height: 100vh;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-link {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--warm-amber);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--warm-amber);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .profile-header {
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.2) 0%, rgba(125, 211, 252, 0.2) 100%);
        }
        
        .bird-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .gallery-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 2rem;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0.5rem;
            width: 0.5rem;
            height: 0.5rem;
            background: var(--warm-amber);
            border-radius: 50%;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            left: 0.75rem;
            top: 1rem;
            width: 1px;
            height: calc(100% - 1rem);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .timeline-item:last-child::after {
            display: none;
        }
        
        .health-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        .health-excellent { background-color: #10B981; }
        .health-good { background-color: #7DD3FC; }
        .health-fair { background-color: #F59E0B; }
        .health-poor { background-color: #EF4444; }
        
        .chart-container {
            height: 300px;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        
        .tab-button.active {
            color: var(--warm-amber);
            border-bottom-color: var(--warm-amber);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-card">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">F</span>
                    </div>
                    <h1 class="text-xl font-bold text-white">FalconPro</h1>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="nav-link text-white font-medium">Dashboard</a>
                    <a href="training.html" class="nav-link text-white font-medium">Training</a>
                    <a href="analytics.html" class="nav-link text-white font-medium">Analytics</a>
                    <a href="profiles.html" class="nav-link text-amber-400 font-medium">Profiles</a>
                    <a href="hood-generator.html" class="nav-link text-white font-medium">Hood Generator</a>
                </div>
                <div class="flex items-center space-x-3">
                    <img src="resources/falconer-portrait.jpg" alt="Falconer" class="w-8 h-8 rounded-full border-2 border-amber-400">
                    <span class="text-white text-sm hidden sm:block">Master Falconer</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="pt-24 pb-8 px-4" id="profileHeader">
        <div class="max-w-7xl mx-auto">
            <div class="glass-card rounded-xl p-6 profile-header">
                <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6">
                    <div class="relative">
                        <img id="profileImage" src="" alt="Bird Profile" class="w-32 h-32 rounded-full object-cover border-4 border-amber-400">
                        <button class="absolute bottom-0 right-0 bg-amber-600 hover:bg-amber-700 text-white p-2 rounded-full transition-colors">
                            ðŸ“·
                        </button>
                    </div>
                    <div class="text-center md:text-left flex-1">
                        <h1 id="profileName" class="text-3xl font-bold text-white mb-2"></h1>
                        <p id="profileSpecies" class="text-xl text-amber-400 mb-4"></p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div>
                                <span class="text-gray-300">Age:</span>
                                <span id="profileAge" class="text-white font-medium ml-2"></span>
                            </div>
                            <div>
                                <span class="text-gray-300">Weight:</span>
                                <span id="profileWeight" class="text-white font-medium ml-2"></span>
                            </div>
                            <div>
                                <span class="text-gray-300">Training Level:</span>
                                <span id="profileLevel" class="text-white font-medium ml-2"></span>
                            </div>
                            <div>
                                <span class="text-gray-300">Status:</span>
                                <span id="profileStatus" class="text-white font-medium ml-2"></span>
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="editProfile()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                            Edit Profile
                        </button>
                        <button onclick="startTrainingSession()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                            Start Training
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Content -->
    <section class="px-4 pb-12">
        <div class="max-w-7xl mx-auto">
            
            <!-- Bird Selection -->
            <div class="glass-card rounded-xl p-6 mb-6" id="birdSelection">
                <h2 class="text-xl font-semibold text-white mb-4">Select Bird Profile</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                    <!-- Bird selection cards will be populated by JavaScript -->
                </div>
            </div>

            <!-- Profile Tabs -->
            <div class="glass-card rounded-xl p-6" id="profileContent">
                <div class="flex flex-wrap space-x-6 mb-6 border-b border-gray-600">
                    <button class="tab-button active px-4 py-2 text-white font-medium" onclick="switchTab('overview')">
                        Overview
                    </button>
                    <button class="tab-button px-4 py-2 text-gray-300 font-medium" onclick="switchTab('health')">
                        Health Records
                    </button>
                    <button class="tab-button px-4 py-2 text-gray-300 font-medium" onclick="switchTab('training')">
                        Training History
                    </button>
                    <button class="tab-button px-4 py-2 text-gray-300 font-medium" onclick="switchTab('gallery')">
                        Photo Gallery
                    </button>
                    <button class="tab-button px-4 py-2 text-gray-300 font-medium" onclick="switchTab('equipment')">
                        Equipment
                    </button>
                </div>

                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-content active">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Basic Information -->
                        <div class="space-y-6">
                            <div class="glass-card rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-white mb-4">Basic Information</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Bird ID:</span>
                                        <span id="basicId" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Species:</span>
                                        <span id="basicSpecies" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Gender:</span>
                                        <span id="basicGender" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Age:</span>
                                        <span id="basicAge" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Weight:</span>
                                        <span id="basicWeight" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Target Weight:</span>
                                        <span id="basicTargetWeight" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Date Added:</span>
                                        <span id="basicDateAdded" class="text-white font-medium"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Current Status -->
                            <div class="glass-card rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-white mb-4">Current Status</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Training Level:</span>
                                        <span id="statusLevel" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Health Status:</span>
                                        <span id="statusHealth" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Last Training:</span>
                                        <span id="statusLastTraining" class="text-white font-medium"></span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Total Sessions:</span>
                                        <span id="statusTotalSessions" class="text-white font-medium"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Weight Trend Chart -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Weight Trend (30 Days)</h3>
                            <div id="weightTrendChart" class="chart-container"></div>
                        </div>
                    </div>
                    
                    <!-- Notes -->
                    <div class="glass-card rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold text-white mb-4">General Notes</h3>
                        <p id="generalNotes" class="text-gray-200 leading-relaxed"></p>
                    </div>
                </div>

                <!-- Health Records Tab -->
                <div id="health-tab" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Health Summary -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Health Summary</h3>
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <span class="health-indicator health-excellent"></span>
                                    <span class="text-white">Excellent Health</span>
                                </div>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-300">Weight Status:</span>
                                        <span class="text-green-400 font-medium ml-2">Optimal</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-300">Appetite:</span>
                                        <span class="text-green-400 font-medium ml-2">Good</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-300">Activity Level:</span>
                                        <span class="text-green-400 font-medium ml-2">High</span>
                                    </div>
                                    <div>
                                        <span class="text-gray-300">Molting Status:</span>
                                        <span class="text-blue-400 font-medium ml-2">Not Molting</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Health Records -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Recent Health Records</h3>
                            <div id="healthRecords" class="space-y-3">
                                <!-- Health records will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add Health Record -->
                    <div class="glass-card rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Add Health Record</h3>
                        <form id="healthRecordForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-gray-200 mb-2">Date</label>
                                <input type="date" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                            </div>
                            <div>
                                <label class="block text-gray-200 mb-2">Record Type</label>
                                <select class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                                    <option>Veterinary Visit</option>
                                    <option>Weight Check</option>
                                    <option>Health Assessment</option>
                                    <option>Treatment</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-200 mb-2">Weight (g)</label>
                                <input type="number" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300" placeholder="Enter weight">
                            </div>
                            <div class="flex items-end">
                                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-colors">
                                    Add Record
                                </button>
                            </div>
                        </form>
                        <div class="mt-4">
                            <label class="block text-gray-200 mb-2">Notes</label>
                            <textarea class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300" rows="3" placeholder="Health notes, observations, treatment details..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Training History Tab -->
                <div id="training-tab" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Training Statistics -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Training Statistics</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Total Sessions:</span>
                                    <span id="trainingTotalSessions" class="text-white font-medium"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Average Success Rate:</span>
                                    <span id="trainingAvgSuccess" class="text-white font-medium"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Favorite Training Type:</span>
                                    <span id="trainingFavoriteType" class="text-white font-medium"></span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">Training Streak:</span>
                                    <span id="trainingStreak" class="text-white font-medium"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Training Performance Chart -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Training Performance</h3>
                            <div id="trainingPerformanceChart" class="chart-container"></div>
                        </div>
                    </div>
                    
                    <!-- Recent Training Sessions -->
                    <div class="glass-card rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Recent Training Sessions</h3>
                        <div id="trainingHistory" class="space-y-3">
                            <!-- Training history will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Photo Gallery Tab -->
                <div id="gallery-tab" class="tab-content">
                    <div class="glass-card rounded-lg p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Photo Gallery</h3>
                            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add Photos
                            </button>
                        </div>
                        <div id="photoGallery" class="bird-gallery">
                            <!-- Photo gallery will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Equipment Tab -->
                <div id="equipment-tab" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        
                        <!-- Assigned Equipment -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Assigned Equipment</h3>
                            <div id="assignedEquipment" class="space-y-3">
                                <!-- Equipment will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- Equipment History -->
                        <div class="glass-card rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-white mb-4">Equipment History</h3>
                            <div id="equipmentHistory" class="space-y-3">
                                <!-- Equipment history will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add Equipment -->
                    <div class="glass-card rounded-lg p-4 mt-6">
                        <h3 class="text-lg font-semibold text-white mb-4">Assign New Equipment</h3>
                        <form id="equipmentForm" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-gray-200 mb-2">Equipment Type</label>
                                <select class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                                    <option>Hood</option>
                                    <option>Jesses</option>
                                    <option>Bells</option>
                                    <option>Lure</option>
                                    <option>Glove</option>
                                    <option>Perch</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-200 mb-2">Equipment ID</label>
                                <input type="text" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300" placeholder="Equipment identifier">
                            </div>
                            <div class="flex items-end">
                                <button type="submit" class="w-full bg-amber-600 hover:bg-amber-700 text-white py-2 px-4 rounded-lg transition-colors">
                                    Assign Equipment
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-card rounded-xl p-6 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <h3 class="text-xl font-semibold text-white mb-6">Edit Bird Profile</h3>
            <form id="editProfileForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-gray-200 mb-2">Bird Name</label>
                        <input type="text" id="editName" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300">
                    </div>
                    <div>
                        <label class="block text-gray-200 mb-2">Species</label>
                        <select id="editSpecies" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                            <option value="Peregrine Falcon">Peregrine Falcon</option>
                            <option value="Red-tailed Hawk">Red-tailed Hawk</option>
                            <option value="Golden Eagle">Golden Eagle</option>
                            <option value="Harris's Hawk">Harris's Hawk</option>
                            <option value="Gyrfalcon">Gyrfalcon</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-200 mb-2">Age (years)</label>
                        <input type="number" id="editAge" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300">
                    </div>
                    <div>
                        <label class="block text-gray-200 mb-2">Gender</label>
                        <select id="editGender" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Unknown">Unknown</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-200 mb-2">Current Weight (g)</label>
                        <input type="number" id="editWeight" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300">
                    </div>
                    <div>
                        <label class="block text-gray-200 mb-2">Target Weight (g)</label>
                        <input type="number" id="editTargetWeight" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300">
                    </div>
                </div>
                <div>
                    <label class="block text-gray-200 mb-2">Training Level</label>
                    <select id="editTrainingLevel" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white">
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                        <option value="Expert">Expert</option>
                    </select>
                </div>
                <div>
                    <label class="block text-gray-200 mb-2">General Notes</label>
                    <textarea id="editNotes" class="w-full px-3 py-2 bg-white bg-opacity-20 border border-gray-400 rounded-lg text-white placeholder-gray-300" rows="4"></textarea>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-colors">
                        Save Changes
                    </button>
                    <button type="button" onclick="closeEditModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentBird = null;
        let weightTrendChart = null;
        let trainingPerformanceChart = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializeProfilesPage();
        });

        function initializeProfilesPage() {
            renderBirdSelection();
            setupEventListeners();
            animateOnLoad();
            
            // Check for bird ID in URL
            const urlParams = new URLSearchParams(window.location.search);
            const birdId = urlParams.get('bird');
            if (birdId) {
                const bird = window.falconryApp.getBirdById(parseInt(birdId));
                if (bird) {
                    selectBird(bird);
                }
            }
        }

        function renderBirdSelection() {
            const container = document.getElementById('birdSelection');
            const grid = container.querySelector('div');
            grid.innerHTML = '';
            
            window.falconryApp.birdDatabase.forEach(bird => {
                const card = document.createElement('div');
                card.className = 'glass-card rounded-lg p-3 cursor-pointer hover:bg-white hover:bg-opacity-10 transition-all';
                card.onclick = () => selectBird(bird);
                
                const statusClass = `status-${bird.status}`;
                
                card.innerHTML = `
                    <div class="relative mb-2">
                        <img src="${bird.image}" alt="${bird.name}" class="w-full h-20 object-cover rounded-lg">
                        <div class="absolute top-1 right-1">
                            <div class="w-3 h-3 rounded-full ${statusClass}"></div>
                        </div>
                    </div>
                    <h4 class="text-sm font-semibold text-white mb-1">${bird.name}</h4>
                    <p class="text-gray-300 text-xs mb-1">${bird.species}</p>
                    <p class="text-gray-400 text-xs">${bird.weight}g</p>
                `;
                
                grid.appendChild(card);
            });
        }

        function selectBird(bird) {
            currentBird = bird;
            
            // Hide bird selection and show profile content
            document.getElementById('birdSelection').style.display = 'none';
            document.getElementById('profileContent').style.display = 'block';
            
            // Update profile header
            updateProfileHeader(bird);
            
            // Update overview tab
            updateOverviewTab(bird);
            
            // Initialize charts
            initializeWeightTrendChart();
            initializeTrainingPerformanceChart();
            
            // Update other tabs
            updateHealthTab(bird);
            updateTrainingTab(bird);
            updateGalleryTab(bird);
            updateEquipmentTab(bird);
            
            // Animate profile content
            anime({
                targets: '#profileContent',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 500,
                easing: 'easeOutQuart'
            });
        }

        function updateProfileHeader(bird) {
            document.getElementById('profileImage').src = bird.image;
            document.getElementById('profileName').textContent = bird.name;
            document.getElementById('profileSpecies').textContent = bird.species;
            document.getElementById('profileAge').textContent = `${bird.age} years`;
            document.getElementById('profileWeight').textContent = `${bird.weight}g`;
            document.getElementById('profileLevel').textContent = bird.trainingLevel;
            
            const statusText = {
                'optimal': 'Optimal',
                'attention': 'Needs Attention',
                'alert': 'Alert Required'
            };
            document.getElementById('profileStatus').textContent = statusText[bird.status];
        }

        function updateOverviewTab(bird) {
            // Basic Information
            document.getElementById('basicId').textContent = `#${bird.id.toString().padStart(3, '0')}`;
            document.getElementById('basicSpecies').textContent = bird.species;
            document.getElementById('basicGender').textContent = bird.gender || 'Unknown';
            document.getElementById('basicAge').textContent = `${bird.age} years`;
            document.getElementById('basicWeight').textContent = `${bird.weight}g`;
            document.getElementById('basicTargetWeight').textContent = `${bird.targetWeight}g`;
            document.getElementById('basicDateAdded').textContent = bird.dateAdded || '2025-01-01';
            
            // Current Status
            document.getElementById('statusLevel').textContent = bird.trainingLevel;
            const healthStatus = bird.status === 'optimal' ? 'Excellent' : 
                                bird.status === 'attention' ? 'Good' : 'Needs Attention';
            document.getElementById('statusHealth').textContent = healthStatus;
            document.getElementById('statusLastTraining').textContent = window.falconryApp.formatDate(bird.lastTrained);
            
            const sessions = window.falconryApp.getTrainingSessionsByBirdId(bird.id);
            document.getElementById('statusTotalSessions').textContent = sessions.length;
            
            // General Notes
            document.getElementById('generalNotes').textContent = bird.notes || 'No notes available.';
        }

        function initializeWeightTrendChart() {
            const container = document.getElementById('weightTrendChart');
            container.classList.add('fade-in-up');
            
            weightTrendChart = echarts.init(container);
            
            // Generate sample weight data
            const dates = [];
            const weights = [];
            const today = new Date();
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                dates.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                
                // Generate realistic weight variations
                const baseWeight = currentBird.weight;
                const variation = (Math.random() - 0.5) * 40; // Â±20g variation
                weights.push(Math.round(baseWeight + variation));
            }
            
            const option = {
                backgroundColor: 'transparent',
                textStyle: { color: '#ffffff' },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#D4A574',
                    textStyle: { color: '#ffffff' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: dates,
                    axisLine: { lineStyle: { color: '#6B7280' } },
                    axisLabel: { color: '#9CA3AF' }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { lineStyle: { color: '#6B7280' } },
                    axisLabel: { color: '#9CA3AF' },
                    splitLine: { lineStyle: { color: 'rgba(255, 255, 255, 0.1)' } }
                },
                series: [
                    {
                        name: 'Weight (g)',
                        type: 'line',
                        smooth: true,
                        data: weights,
                        lineStyle: { color: '#D4A574' },
                        areaStyle: {
                            color: {
                                type: 'linear',
                                x: 0, y: 0, x2: 0, y2: 1,
                                colorStops: [
                                    { offset: 0, color: 'rgba(212, 165, 116, 0.3)' },
                                    { offset: 1, color: 'rgba(212, 165, 116, 0.1)' }
                                ]
                            }
                        }
                    }
                ]
            };
            
            weightTrendChart.setOption(option);
        }

        function initializeTrainingPerformanceChart() {
            const container = document.getElementById('trainingPerformanceChart');
            container.classList.add('fade-in-up');
            
            trainingPerformanceChart = echarts.init(container);
            
            const sessions = window.falconryApp.getTrainingSessionsByBirdId(currentBird.id);
            const recentSessions = sessions.slice(0, 10);
            
            const dates = recentSessions.map(session => 
                window.falconryApp.formatDate(session.date)
            ).reverse();
            
            const successRates = recentSessions.map(session => session.success).reverse();
            
            const option = {
                backgroundColor: 'transparent',
                textStyle: { color: '#ffffff' },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#D4A574',
                    textStyle: { color: '#ffffff' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: dates.length > 0 ? dates : ['No Data'],
                    axisLine: { lineStyle: { color: '#6B7280' } },
                    axisLabel: { color: '#9CA3AF' }
                },
                yAxis: {
                    type: 'value',
                    min: 0,
                    max: 100,
                    axisLine: { lineStyle: { color: '#6B7280' } },
                    axisLabel: { color: '#9CA3AF' },
                    splitLine: { lineStyle: { color: 'rgba(255, 255, 255, 0.1)' } }
                },
                series: [
                    {
                        name: 'Success Rate (%)',
                        type: 'bar',
                        data: dates.length > 0 ? successRates : [0],
                        itemStyle: {
                            color: {
                                type: 'linear',
                                x: 0, y: 0, x2: 0, y2: 1,
                                colorStops: [
                                    { offset: 0, color: '#7DD3FC' },
                                    { offset: 1, color: '#3B82F6' }
                                ]
                            }
                        }
                    }
                ]
            };
            
            trainingPerformanceChart.setOption(option);
        }

        function updateHealthTab(bird) {
            const container = document.getElementById('healthRecords');
            container.innerHTML = '';
            
            // Sample health records
            const healthRecords = [
                { date: '2025-11-01', type: 'Weight Check', weight: bird.weight, notes: 'Regular weight monitoring' },
                { date: '2025-10-25', type: 'Health Assessment', notes: 'Overall excellent condition' },
                { date: '2025-10-15', type: 'Veterinary Visit', notes: 'Annual checkup - all clear' }
            ];
            
            healthRecords.forEach(record => {
                const recordElement = document.createElement('div');
                recordElement.className = 'timeline-item';
                
                recordElement.innerHTML = `
                    <div class="bg-white bg-opacity-10 rounded-lg p-3">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="text-white font-medium">${record.type}</h4>
                            <span class="text-gray-400 text-sm">${window.falconryApp.formatDate(record.date)}</span>
                        </div>
                        ${record.weight ? `<p class="text-gray-300 text-sm mb-1">Weight: ${record.weight}g</p>` : ''}
                        <p class="text-gray-200 text-sm">${record.notes}</p>
                    </div>
                `;
                
                container.appendChild(recordElement);
            });
        }

        function updateTrainingTab(bird) {
            const sessions = window.falconryApp.getTrainingSessionsByBirdId(bird.id);
            
            // Training Statistics
            document.getElementById('trainingTotalSessions').textContent = sessions.length;
            
            const avgSuccess = sessions.length > 0 ? 
                Math.round(sessions.reduce((sum, session) => sum + session.success, 0) / sessions.length) : 0;
            document.getElementById('trainingAvgSuccess').textContent = `${avgSuccess}%`;
            
            // Favorite training type
            const typeCounts = {};
            sessions.forEach(session => {
                typeCounts[session.type] = (typeCounts[session.type] || 0) + 1;
            });
            const favoriteType = Object.keys(typeCounts).reduce((a, b) => 
                typeCounts[a] > typeCounts[b] ? a : b, 'None'
            );
            document.getElementById('trainingFavoriteType').textContent = favoriteType;
            document.getElementById('trainingStreak').textContent = '7 days'; // Placeholder
            
            // Recent Training Sessions
            const historyContainer = document.getElementById('trainingHistory');
            historyContainer.innerHTML = '';
            
            sessions.slice(0, 5).forEach(session => {
                const sessionElement = document.createElement('div');
                sessionElement.className = 'flex items-center justify-between p-3 bg-white bg-opacity-10 rounded-lg';
                
                sessionElement.innerHTML = `
                    <div>
                        <h4 class="text-white font-medium">${session.type}</h4>
                        <p class="text-gray-300 text-sm">${session.duration} minutes</p>
                    </div>
                    <div class="text-right">
                        <p class="text-white font-medium">${session.success}% success</p>
                        <p class="text-gray-300 text-sm">${window.falconryApp.formatDate(session.date)}</p>
                    </div>
                `;
                
                historyContainer.appendChild(sessionElement);
            });
        }

        function updateGalleryTab(bird) {
            const gallery = document.getElementById('photoGallery');
            gallery.innerHTML = '';
            
            // Sample gallery images (using the same bird image for demo)
            for (let i = 0; i < 8; i++) {
                const item = document.createElement('div');
                item.className = 'gallery-item';
                
                item.innerHTML = `
                    <img src="${bird.image}" alt="${bird.name} - Photo ${i + 1}">
                    <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span class="text-white text-sm">Photo ${i + 1}</span>
                    </div>
                `;
                
                gallery.appendChild(item);
            }
        }

        function updateEquipmentTab(bird) {
            // Assigned Equipment
            const assignedContainer = document.getElementById('assignedEquipment');
            assignedContainer.innerHTML = '';
            
            const equipment = [
                { type: 'Hood', id: 'HD-001', status: 'Active' },
                { type: 'Jesses', id: 'JS-005', status: 'Active' },
                { type: 'Bells', id: 'BL-012', status: 'Active' }
            ];
            
            equipment.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'flex items-center justify-between p-3 bg-white bg-opacity-10 rounded-lg';
                
                itemElement.innerHTML = `
                    <div>
                        <h4 class="text-white font-medium">${item.type}</h4>
                        <p class="text-gray-300 text-sm">ID: ${item.id}</p>
                    </div>
                    <span class="text-green-400 text-sm">${item.status}</span>
                `;
                
                assignedContainer.appendChild(itemElement);
            });
            
            // Equipment History
            const historyContainer = document.getElementById('equipmentHistory');
            historyContainer.innerHTML = '';
            
            const history = [
                { date: '2025-10-20', action: 'Hood replaced', details: 'Old hood damaged, replaced with HD-001' },
                { date: '2025-09-15', action: 'Jesses adjusted', details: 'Resized jesses for better fit' },
                { date: '2025-08-10', action: 'Bells added', details: 'Added tracking bells for outdoor training' }
            ];
            
            history.forEach(record => {
                const recordElement = document.createElement('div');
                recordElement.className = 'timeline-item';
                
                recordElement.innerHTML = `
                    <div class="bg-white bg-opacity-10 rounded-lg p-3">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="text-white font-medium">${record.action}</h4>
                            <span class="text-gray-400 text-sm">${window.falconryApp.formatDate(record.date)}</span>
                        </div>
                        <p class="text-gray-200 text-sm">${record.details}</p>
                    </div>
                `;
                
                historyContainer.appendChild(recordElement);
            });
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('text-gray-300');
                btn.classList.remove('text-white');
            });
            
            event.currentTarget.classList.add('active');
            event.currentTarget.classList.remove('text-gray-300');
            event.currentTarget.classList.add('text-white');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function editProfile() {
            if (!currentBird) return;
            
            // Pre-fill form with current bird data
            document.getElementById('editName').value = currentBird.name;
            document.getElementById('editSpecies').value = currentBird.species;
            document.getElementById('editAge').value = currentBird.age;
            document.getElementById('editGender').value = currentBird.gender || 'Unknown';
            document.getElementById('editWeight').value = currentBird.weight;
            document.getElementById('editTargetWeight').value = currentBird.targetWeight;
            document.getElementById('editTrainingLevel').value = currentBird.trainingLevel;
            document.getElementById('editNotes').value = currentBird.notes || '';
            
            // Show modal
            document.getElementById('editProfileModal').classList.remove('hidden');
            anime({
                targets: '#editProfileModal .glass-card',
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuart'
            });
        }

        function closeEditModal() {
            anime({
                targets: '#editProfileModal .glass-card',
                scale: [1, 0.8],
                opacity: [1, 0],
                duration: 200,
                easing: 'easeInQuart',
                complete: () => {
                    document.getElementById('editProfileModal').classList.add('hidden');
                }
            });
        }

        function startTrainingSession() {
            if (!currentBird) return;
            
            window.location.href = `training.html?bird=${currentBird.id}`;
        }

        function setupEventListeners() {
            document.getElementById('editProfileForm').addEventListener('submit', handleProfileUpdate);
            document.getElementById('healthRecordForm').addEventListener('submit', handleHealthRecordAdd);
            document.getElementById('equipmentForm').addEventListener('submit', handleEquipmentAssign);
        }

        function handleProfileUpdate(e) {
            e.preventDefault();
            
            if (!currentBird) return;
            
            // Update bird data
            currentBird.name = document.getElementById('editName').value;
            currentBird.species = document.getElementById('editSpecies').value;
            currentBird.age = parseInt(document.getElementById('editAge').value);
            currentBird.gender = document.getElementById('editGender').value;
            currentBird.weight = parseInt(document.getElementById('editWeight').value);
            currentBird.targetWeight = parseInt(document.getElementById('editTargetWeight').value);
            currentBird.trainingLevel = document.getElementById('editTrainingLevel').value;
            currentBird.notes = document.getElementById('editNotes').value;
            
            // Update UI
            updateProfileHeader(currentBird);
            updateOverviewTab(currentBird);
            
            closeEditModal();
            window.falconryApp.showNotification('Profile updated successfully!', 'success');
        }

        function handleHealthRecordAdd(e) {
            e.preventDefault();
            window.falconryApp.showNotification('Health record added successfully!', 'success');
            e.target.reset();
        }

        function handleEquipmentAssign(e) {
            e.preventDefault();
            window.falconryApp.showNotification('Equipment assigned successfully!', 'success');
            e.target.reset();
        }

        function animateOnLoad() {
            anime({
                targets: '.glass-card',
                opacity: [0, 1],
                translateY: [30, 0],
                delay: anime.stagger(100),
                duration: 600,
                easing: 'easeOutQuart'
            });
        }

        // Make charts responsive
        window.addEventListener('resize', () => {
            if (weightTrendChart) weightTrendChart.resize();
            if (trainingPerformanceChart) trainingPerformanceChart.resize();
        });
    </script>
</body>
</html>